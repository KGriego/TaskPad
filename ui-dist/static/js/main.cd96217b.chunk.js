(this["webpackJsonptaskpad-webapp"]=this["webpackJsonptaskpad-webapp"]||[]).push([[0],{147:function(e,t,a){e.exports=a(347)},152:function(e,t,a){},347:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(36),i=a.n(o),s=a(353),c=a(351),l=(a(152),a(5)),u=a(6),p=a(9),d=a(8),h=a(10),f=a(352),m=a(55),v=(a(164),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated()&&this.props.history.push("/tasks")}},{key:"render",value:function(){return r.a.createElement("main",{className:"flex"},r.a.createElement("div",{className:"column-main tile"},r.a.createElement("h1",null,"what gets measured gets improved"),r.a.createElement("p",null,"Simple taskpad app that lets you add tasks and tag them. Provide you with a dashboard to see where you have been spending your time!")))}}]),t}(n.Component)),g=a(17),k=a.n(g),y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={username:""},a.setUserName=function(){""===a.state.username&&a.props.auth.isAuthenticated()&&a.props.auth.getProfile((function(e,t){if(t)return console.error("error while retrieveing user profile: ".concat(t));a.setState({username:e.given_name||e.nickname||e.email})}))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setUserName()}},{key:"componentDidUpdate",value:function(){this.setUserName()}},{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.login,n=e.logout;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"Taskpad")),r.a.createElement("nav",null,r.a.createElement("ul",{className:"site-nav"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Tasks")),r.a.createElement("li",null,r.a.createElement("a",{href:"/reports"},"Reports")),r.a.createElement("li",{className:"nav-date"},k()().format("DD MMM YYYY")),r.a.createElement("li",{className:"nav-username"},this.state.username),r.a.createElement("li",{style:{marginLeft:"0.5em"}},t()?r.a.createElement("a",{href:"#",onClick:n},"Logout"):r.a.createElement("a",{href:"#",onClick:a},"Login")))))}}]),t}(n.Component),b=a(136),E="taskpad-midlu-dev.auth0.com",O="PnH3de3cSP7exQMYdRlA1OSUoXzs84NV",w="https://taskpad-midlu-dev.auth0.com/api/v2/",j="http://localhost:3002";E=window.AUTH0_DOMAIN,O=window.AUTH0_CLIENT_ID,w=window.AUTH0_AUDIENCE,j=window.AUTH0_CALLBACK;var C=function e(){var t=this;Object(l.a)(this,e),this.login=function(){return t.auth0.authorize()},this.handleAuthentication=function(e){t.auth0.parseHash((function(a,n){if(a)return e(a);n&&n.accessToken&&n.idToken?(t.setSession(n),e()):e({err:"error during authentication. check console"})}))},this.setSession=function(e){var t=JSON.stringify(1e3*e.expiresIn+(new Date).getTime());console.log("Expires at:",t),console.log("Expires in:",e.expiresIn),localStorage.setItem("access_token",e.accessToken),localStorage.setItem("id_token",e.idToken),localStorage.setItem("expires_at",t)},this.isAuthenticated=function(){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e},this.logout=function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),t.userProfile=null,t.auth0.logout({clientID:O,returnTo:j})},this.getIdToken=function(){var e=localStorage.getItem("id_token");if(!e)throw new Error("No id token found.");return e},this.getAccessToken=function(){var e=localStorage.getItem("access_token");if(!e)throw new Error("No access token found.");return e},this.getProfile=function(e){if(t.userProfile)return e(t.userProfile);t.auth0.client.userInfo(t.getAccessToken(),(function(a,n){n&&(t.userProfile=n),e(n,a)}))},this.userProfile=null,this.auth0=new b.a.WebAuth({domain:E,clientID:O,audience:w,redirectUri:j,responseType:"token id_token",scope:"openid profile email"})},T=a(26),S=a(7),R=a.n(S),P=a(33),D=a(12),x=a(137),N=a.n(x),A=a(34),_=a(28),M=a.n(_),G=a(139),U=a(23),I=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"getTasksCount",value:function(){var e=this.props.count;return 0===e?"No tasks :-)":1===e?"1 task":"".concat(e," tasks")}},{key:"render",value:function(){var e=this.props,t=e.onAddTask,a=e.onReload,n=e.onTaskFilterChange,o=e.filter;return r.a.createElement("div",{className:"flex toolbar"},r.a.createElement("button",{onClick:t},"Add"),r.a.createElement("button",{onClick:a},"Reload"),r.a.createElement("select",{onChange:n,value:o},r.a.createElement("option",{value:"pending"},"Pending"),r.a.createElement("option",{value:"today"},"Today"),r.a.createElement("option",{value:"tomorrow"},"Tomorrow"),r.a.createElement("option",{value:"yesterday"},"Yesterday"),r.a.createElement("option",{value:"thisweek"},"This Week"),r.a.createElement("option",{value:"nextweek"},"Next Week"),r.a.createElement("option",{value:"lastweek"},"Last Week")),r.a.createElement("strong",{className:"count"},this.getTasksCount()),r.a.createElement("div",{className:"sweet-loading loader"},r.a.createElement(A.BarLoader,{sizeUnit:"em",height:7,width:200,color:"#cc6b5a",loading:this.props.loading})))}}]),t}(n.Component);function W(e){if("pending"===e)return"pending=true";if("today"===e){var t=L(0),a=t.from,n=t.to;return"from=".concat(a,"&to=").concat(n)}if("tomorrow"===e){var r=L(1),o=r.from,i=r.to;return"from=".concat(o,"&to=").concat(i)}if("yesterday"===e){var s=L(-1),c=s.from,l=s.to;return"from=".concat(c,"&to=").concat(l)}if("thisweek"===e){var u=F(0),p=u.from,d=u.to;return"from=".concat(p,"&to=").concat(d)}if("nextweek"===e){var h=F(1),f=h.from,m=h.to;return"from=".concat(f,"&to=").concat(m)}if("lastweek"===e){var v=F(-1),g=v.from,k=v.to;return"from=".concat(g,"&to=").concat(k)}}function L(e){var t=k()().add(e,"day");return{from:t.utc().startOf("day").toISOString(),to:t.utc().endOf("day").toISOString()}}function F(e){var t=7*e;return{from:k()().startOf("isoWeek").add(1,"day").add(t,"days").utc().startOf("day").toISOString(),to:k()().endOf("isoWeek").add(-2,"day").add(t,"days").utc().endOf("day").toISOString()}}function H(e){var t=k()(e),a=1;return 5===t.day()&&(a=3),6===t.day()&&(a=2),k()(t).add(a,"day")}function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={taskUnderMouse:void 0},a.onEditTask=function(e){e.dirty&&void 0===e.error||a.props.onEditTask(e)},a.onToggleDone=function(e){var t=z({},e,{completed:!e.completed});a.props.onSaveTask(t,"update")},a.onRetrySaveTask=function(e){if(!["create","update","delete"].includes(e.cud))throw new Error("The task sent for retry is not having CUD operation");a.props.onSaveTask(e,e.cud)},a.onLinkClicked=function(e){window.open(e)},a.onMouseEnter=function(e){a.setState({taskUnderMouse:e.id})},a.onMouseLeave=function(e){a.setState({taskUnderMouse:void 0})},a.duplicateTaskForNextWorkingDay=function(e){var t=z({},e,{id:void 0,due:H(e.due)});a.props.onSaveTask(t,"create")},a.moveDueToNextWorkingDay=function(e){var t=z({},e,{due:H(e.due)});a.props.onSaveTask(t,"update")},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderTasks",value:function(){var e=this;return this.props.tasks.map((function(t,a){var n=k()(t.due).format("Do MMM"),o=t.dirty&&void 0===t.error?"flex task task-dirty":"flex task",i=[];N()(t.notes).forEach((function(t){if(!(i.length>2)){var a=r.a.createElement("span",{"data-tip":t,key:i.length},r.a.createElement(U.g,{style:{color:"blue",cursor:"pointer"},onClick:function(){return e.onLinkClicked(t)}}));i.push(a)}}));var s=null;return e.state.taskUnderMouse!==t.id||t.dirty||(s=r.a.createElement("span",null,r.a.createElement(M.a,null),r.a.createElement(U.b,{"data-tip":"move this task to next working day",style:{color:"green",cursor:"pointer"},onClick:function(){return e.moveDueToNextWorkingDay(t)}}),r.a.createElement(U.f,{"data-tip":"duplicate this task for next working day",style:{color:"green",cursor:"pointer"},onClick:function(){return e.duplicateTaskForNextWorkingDay(t)}}))),r.a.createElement("li",{key:a,className:o,onMouseEnter:function(){return e.onMouseEnter(t)},onMouseLeave:function(){return e.onMouseLeave(t)}},r.a.createElement(M.a,null),r.a.createElement("input",{type:"checkbox",checked:t.completed,onChange:function(){return e.onToggleDone(t)}}),r.a.createElement("span",{className:"task-title",onClick:function(){return e.onEditTask(t)}},t.title),r.a.createElement("span",{className:"sweet-loading toobar-loader"},r.a.createElement(A.BarLoader,{sizeUnit:"px",height:4,width:100,color:"#cc6b5a",loading:t.dirty&&void 0===t.error})),void 0!==t.error?r.a.createElement("span",{className:"task-right",title:t.error},r.a.createElement(G.a,{title:t.error,style:{color:"red",cursor:"pointer"},onClick:function(){return e.onRetrySaveTask(t)}})):r.a.createElement("span",{className:"task-right"}),r.a.createElement("span",null,s),r.a.createElement("span",null,i),r.a.createElement("span",{className:"task-due"},n))}))}},{key:"render",value:function(){var e=this.props,t=e.tasks,a=e.loading,n=e.filter,o=e.onTaskFilterChange,i=e.onAddTask,s=e.onReload;return r.a.createElement("div",{className:"column-main tile"},r.a.createElement("div",{className:"flex tasksarea"},r.a.createElement(I,{loading:a,filter:n,count:t.length,onTaskFilterChange:o,onAddTask:i,onReload:s}),r.a.createElement("ul",{className:"tasks"},this.renderTasks())))}}]),t}(n.Component),Y=a(140),V=a.n(Y),J=(a(306),a(67)),K=a.n(J);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).onSaveTask=function(e){e.preventDefault(),a.props.onSaveTask(a.state.task,void 0===a.state.task.id?"create":"update")},a.onDeleteTask=function(e){e.preventDefault(),a.props.onSaveTask(a.state.task,"delete")},a.onCancelEditTask=function(e){e.preventDefault(),a.props.onCancelEditTask()},a.onDueDateChange=function(e){a.setState({task:X({},a.state.task,{due:e})})},a.onTitleChange=function(e){a.setState({task:X({},a.state.task,{title:e.target.value})})},a.onEffortChange=function(e){a.setState({task:X({},a.state.task,{effort:parseFloat(e.target.value)})})},a.onNotesChange=function(e){a.setState({task:X({},a.state.task,{notes:e.target.value})})},a.onTagChange=function(e){var t=e.map((function(e){return e.value}));a.setState({task:X({},a.state.task,{tags:t})})};var n=a.props.task;return a.state={task:X({},n,{due:k()(n.due).toDate()}),tags:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.task,t=e.id,a=e.title,n=e.due,o=e.effort,i=e.tags,s=e.notes,c=i.map((function(e){return{value:e,label:e}})),l=this.props.usertags.map((function(e){return{value:e,label:e}})),u={control:function(e){return X({},e,{minHeight:0,padding:0,borderRadius:0})},container:function(e){return X({},e,{minHeight:0,padding:0,borderRadius:0})},valueContainer:function(e){return X({},e,{minHeight:0,padding:0,borderRadius:0})},dropdownIndicator:function(e){return X({},e,{display:"none"})},clearIndicator:function(e){return X({},e,{display:"none"})},indicatorSeparator:function(e){return X({},e,{display:"none"})},indicatorsContainer:function(e){return X({},e,{display:"none"})},multiValueRemove:function(e){return X({},e,{display:"none"})}};return r.a.createElement("div",{className:"column-sidebar tile"},r.a.createElement("form",{className:"task-form"},r.a.createElement("h3",null,"Task"),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{id:"title",type:"text",name:"title",value:a,onChange:this.onTitleChange,autoFocus:!0,placeholder:"title of the task"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"due"},"Due"),r.a.createElement("span",null,r.a.createElement(V.a,{selected:n,dateFormat:"d MMM yyyy",onChange:this.onDueDateChange}))),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"effort"},"Effort"),r.a.createElement("input",{id:"effort",type:"number",step:"0.5",value:o,onChange:this.onEffortChange,name:"effort",placeholder:"effort to complete in days (eg 1.5)"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"tags"},"Tags"),r.a.createElement(K.a,{placeholder:"enter each tag and press enter",styles:u,defaultValue:c,isMulti:!0,onChange:this.onTagChange,options:l})),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"notes"},"Notes"),r.a.createElement("textarea",{className:"tasknotes",id:"notes",type:"text",name:"tags",value:s,onChange:this.onNotesChange,placeholder:"task notes",rows:"4"})),r.a.createElement("button",{onClick:this.onSaveTask},"Save"),void 0!==t?r.a.createElement("button",{onClick:this.onDeleteTask},"Delete"):null,r.a.createElement("button",{onClick:this.onCancelEditTask},"Cancel")))}}]),t}(n.Component),Z=a(68),ee={hAxis:{title:"time spent",textPosition:"none"},vAxis:{slantedText:!0,slantedTextAngle:90},titleTextStyle:{fontFamily:"Raleway",fontSize:"12",bold:!1,italic:!1},width:"100%",chartArea:{top:10,left:40,width:"100%",height:"80%"}},te=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderToolBar",value:function(){var e=this.props,t=e.onMetricsPrev,a=e.onMetricsNext;return r.a.createElement("div",{className:"toolbar"},r.a.createElement("span",{className:"nav","data-tip":"previous week",onClick:t},"<"),r.a.createElement("span",{className:"title"},"Time Spent - Daily"),r.a.createElement("span",{className:"nav","data-tip":"next week",onClick:a},">"))}},{key:"renderSecondToolBar",value:function(){var e=this.props.metrics,t="Task efforts",a=0;if(void 0!==e&&e.length>0){var n=k()(e[0].day).format("Do MMM"),o=k()(e[e.length-1].day).format("Do MMM");t="".concat(n," - ").concat(o),a=e.map((function(e){return e.effort})).reduce((function(e,t){return e+t}))}var i=r.a.createElement(A.BarLoader,{sizeUnit:"px",width:50,height:5,color:"#cc6b5a",loading:this.props.loading});return r.a.createElement("div",{className:"secondtoolbar"},r.a.createElement("span",null,t),r.a.createElement("span",null,i),r.a.createElement("span",null,a," hours"))}},{key:"renderGraph",value:function(){var e=[],t=this.props.metrics;return void 0!==t&&t.length>0?(e=[["Day","Hours",{role:"annotation"}]],t.forEach((function(t){var a=k()(t.day).format("ddd"),n=parseFloat(t.effort);e=[].concat(Object(T.a)(e),[[a,n,"".concat(n," h")]])})),r.a.createElement(Z.a,{chartType:"BarChart",data:e,options:ee})):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"taskmetrics"},r.a.createElement(M.a,null),this.renderToolBar(),this.renderSecondToolBar(),this.renderGraph())}}]),t}(r.a.Component),ae=a(144),ne=a.n(ae),re=new(function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"log",value:function(e){console.log(e)}},{key:"info",value:function(e){console.info(e)}},{key:"error",value:function(e){console.error(e)}},{key:"warning",value:function(e){console.warn(e)}}]),e}()),oe=new(function(){function e(){Object(l.a)(this,e),this.config={position:"top-right",autoClose:!0,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0}}return Object(u.a)(e,[{key:"showError",value:function(e){m.toast.error(e,this.config)}},{key:"showWarning",value:function(e){m.toast.warn(e)}},{key:"showSystemError",value:function(){this.showError("Unfortunately Taskpad encountered an error. Please retry and if problem persists contact the owner.")}}]),e}()),ie=new(function(){function e(){Object(l.a)(this,e),this.auth=null}return Object(u.a)(e,[{key:"init",value:function(e){this.auth=e}},{key:"get",value:function(){var e=Object(D.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request("get",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(D.a)(R.a.mark((function e(t,a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request("post",t,a);case 3:return e.abrupt("return",null);case 6:return e.prev=6,e.t0=e.catch(0),re.error(e.t0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(D.a)(R.a.mark((function e(t,a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request("put",t,a);case 3:return e.abrupt("return",null);case 6:return e.prev=6,e.t0=e.catch(0),re.error(e.t0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(D.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request("delete",t);case 3:return e.abrupt("return",null);case 6:return e.prev=6,e.t0=e.catch(0),re.error(e.t0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getWithErrorHandled",value:function(){var e=Object(D.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.get(t);case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),re.error(e.t0),oe.showSystemError();case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getWithWarningHandled",value:function(){var e=Object(D.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.get(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),re.error(e.t0),oe.showWarning(a);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=Object(D.a)(R.a.mark((function e(t,a,n){var r,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.isAuthenticated()){e.next=3;break}return oe.showError("You session is timeout. Loading login..."),e.abrupt("return",this.auth.login());case 3:return e.prev=3,e.next=6,ne()({method:t,url:a,data:n,headers:{"content-type":"application/json",Authorization:"Bearer ".concat(this.auth.getAccessToken())}});case 6:return r=e.sent,e.abrupt("return",r.data);case 10:if(e.prev=10,e.t0=e.catch(3),o=e.t0,console.error(o.response.status),401!==o.response.status){e.next=17;break}return oe.showError("You session is timeout. Loading login..."),e.abrupt("return",this.auth.login());case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}());function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var le=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).loadTasks=Object(D.a)(R.a.mark((function e(){var t,n=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(!(n.length>0&&void 0!==n[0])||n[0])&&a.setState({loading:!0}),t=W(a.state.filter),ie.getWithErrorHandled("/api/tasks?".concat(t)).then((function(e){a.setState({loading:!1}),e&&Array.isArray(e.data)&&a.setState({tasks:e.data.map((function(e){return ce({},e,{dirty:!1,error:void 0})}))})})),a.loadMetrics(a.state.metricsWeekNr);case 5:case"end":return e.stop()}}),e)}))),a.loadMetrics=function(){var e=Object(D.a)(R.a.mark((function e(t){var n,r,o,i,s,c,l=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(l.length>1&&void 0!==l[1])||l[1],r=a.props.auth.userProfile.sub,n&&a.setState({metricsLoading:!0}),o=F(t),i=o.from,s=o.to,e.next=6,ie.getWithErrorHandled("/api/taskmetrics/daily?from=".concat(i,"&to=").concat(s,"&user=").concat(r));case 6:c=e.sent,a.setState({metricsLoading:!1}),c&&a.setState({metricsWeekNr:t,metrics:c.data});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadUserTags=Object(D.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/usertags","Error while retrieving your tags",e.next=4,ie.getWithWarningHandled("/api/usertags","Error while retrieving your tags");case 4:t=e.sent,Array.isArray(t.data)&&a.setState({usertags:t.data});case 6:case"end":return e.stop()}}),e)}))),a.onTaskFilterChange=function(e){var t={filter:e.target.value};a.setState(t,(function(){return a.loadTasks()}))},a.onAddTask=function(){return a.setState({editTask:{title:"",due:k()().toISOString(),completed:!1,effort:1,tags:[],notes:""}},(function(){a.loadUserTags()}))},a.onEditTask=function(e){a.setState({editTask:e}),a.loadUserTags()},a.onSaveTask=function(){var e=Object(D.a)(R.a.mark((function e(t,n){var r,o,i,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.auth.userProfile.sub,o=a.state.tasks,i=ce({},t,{dirty:!0,error:void 0,cud:n,userid:r}),s=a._getUpdatedTasks(o,i,n),a.setState({editTask:null,tasks:s}),e.next=7,a._doCud(i,n);case 7:if(!e.sent){e.next=13;break}return oe.showError("Error is ".concat(n," operation. Please retry")),i.error="Error is ".concat(n," operation. Please click here to retry"),a.forceUpdate(),e.abrupt("return");case 13:a.loadTasks(!1);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.onCancelEditTask=function(){return a.setState({editTask:null})},a.onMetricsPrev=function(){return a.loadMetrics(a.state.metricsWeekNr-1)},a.onMetricsNext=function(){return a.loadMetrics(a.state.metricsWeekNr+1)},a.renderTaskDetail=function(){return r.a.createElement($,{task:a.state.editTask,usertags:a.state.usertags,onSaveTask:a.onSaveTask,onDeleteTask:a.onDeleteTask,onCancelEditTask:a.onCancelEditTask})},a._doCud=function(){var e=Object(D.a)(R.a.mark((function e(t,a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("create"!==a){e.next=2;break}return e.abrupt("return",ie.post("/api/tasks",t));case 2:if("update"!==a){e.next=4;break}return e.abrupt("return",ie.put("/api/tasks/".concat(t.id),t));case 4:if("delete"!==a){e.next=6;break}return e.abrupt("return",ie.delete("/api/tasks/".concat(t.id)));case 6:throw new Error("CUD should be either create or update or delete. Received ".concat(a));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a._getUpdatedTasks=function(e,t,a){if("update"===a||"delete"===a)return e.map((function(e){return e.id!==t.id?e:t}));if("create"===a)return[].concat(Object(T.a)(e),[t]);throw new Error("CUD should be either create or update or delete. Received ".concat(a))},a.state={tasks:[],usertags:[],editTask:null,filter:"pending",loading:!1,metrics:[],metricsLoading:!1,metricsWeekNr:0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(D.a)(R.a.mark((function e(){var t=this;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){return t.loadTasks()}),3e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderMetrics",value:function(){var e=this.state,t=e.metricsLoading,a=e.metrics;return r.a.createElement("div",{className:"column-sidebar tile"},r.a.createElement(te,{loading:t,metrics:a,onMetricsPrev:this.onMetricsPrev,onMetricsNext:this.onMetricsNext}))}},{key:"render",value:function(){var e=this.state,t=e.tasks,a=e.filter,n=e.loading;return r.a.createElement("main",{className:"flex taskpage"},r.a.createElement(q,{loading:n,tasks:t,filter:a,onAddTask:this.onAddTask,onEditTask:this.onEditTask,onTaskFilterChange:this.onTaskFilterChange,onReload:this.loadTasks,onSaveTask:this.onSaveTask}),this.state.editTask?this.renderTaskDetail():this.renderMetrics())}}]),t}(n.Component),ue=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"getReportsCount",value:function(){if(this.props.loading)return null;var e=this.props.count;return 0===e?"No Reports (yet)":1===e?"1 report":"".concat(e," reports")}},{key:"render",value:function(){var e=this.props,t=e.onAddReport,a=e.onReload;return r.a.createElement("div",{className:"report-toolbar"},r.a.createElement("button",{onClick:t},"Create Report"),r.a.createElement("button",{onClick:a},"Reload"),r.a.createElement("strong",{className:"count"},this.getReportsCount()),r.a.createElement("div",{className:"sweet-loading loader"},r.a.createElement(A.BarLoader,{sizeUnit:"em",height:7,width:200,color:"#cc6b5a",loading:this.props.loading})))}}]),t}(n.Component);function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={logicalOperations:[],selectedOperation:"",tags:[],usertags:[]},a.loadUserTags=Object(D.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/usertags","Error while retrieving your tags",e.next=4,ie.getWithWarningHandled("/api/usertags","Error while retrieving your tags");case 4:(t=e.sent)&&(console.log(t),a.setState({usertags:t.data}));case 6:case"end":return e.stop()}}),e)}))),a.onTagChange=function(e){var t=e.map((function(e){return e.value})),n={operator:a.state.selectedOperation,tags:t};a.state.tags=t,a.props.onRuleChanged(a.props.id,n)},a.onLogicChange=function(e){var t=e.target.value;a.setState({selectedOperation:t},(function(){var e={operator:a.state.selectedOperation,tags:a.state.tags};a.props.onRuleChanged(a.props.id,e)}))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Object(D.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUserTags();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.firstRule?["","not"]:["and not","or","and"],t=e[0];this.setState({logicalOperations:e,selectedOperation:t,tags:[]})}},{key:"renderLogicOperation",value:function(){var e=this.state,t=e.logicalOperations,a=e.selectedOperation;return r.a.createElement("span",{id:"logic"},r.a.createElement("select",{onChange:this.onLogicChange,value:a},t.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))}},{key:"render",value:function(){var e=this,t={control:function(e){return de({},e,{minHeight:0,padding:0,borderRadius:0})},container:function(e){return de({},e,{minHeight:0,padding:0,borderRadius:0})},valueContainer:function(e){return de({},e,{minHeight:0,padding:0,borderRadius:0})},dropdownIndicator:function(e){return de({},e,{display:"none"})},clearIndicator:function(e){return de({},e,{display:"none"})},indicatorSeparator:function(e){return de({},e,{display:"none"})},indicatorsContainer:function(e){return de({},e,{display:"none"})},multiValueRemove:function(e){return de({},e,{display:"none"})}},a=this.state,n=a.tags,o=a.usertags,i=n.map((function(e){return{value:e,label:e}})),s=o.map((function(e){return{value:e,label:e}})),c=this.props.onRuleAdd;return r.a.createElement("div",{className:"pie-group-rule"},this.renderLogicOperation(),r.a.createElement("span",{id:"tags"},r.a.createElement(K.a,{placeholder:"enter tags whose tasks should be selected",styles:t,defaultValue:i,isMulti:!0,onChange:this.onTagChange,options:s})),r.a.createElement("span",{id:"controls"},this.props.firstRule?r.a.createElement(U.a,{size:20,style:{cursor:"pointer"},onClick:c}):r.a.createElement(U.d,{size:20,style:{cursor:"pointer"},onClick:function(){return e.props.onRuleDelete(e.props.id)}})))}}]),t}(n.Component),fe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",rules:[]},a.onNameChange=function(e){a.setState({name:e.target.value.replace(/[\W_]+/g,"")})},a.onRuleChanged=function(e,t){var n=a.state.rules.map((function(a){return a.id===e?{id:e,rule:t}:a}));a.setState({rules:n})},a.getRuleStr=function(){return a.state.rules.map((function(e){return e.rule})).map((function(e){var t="(".concat(e.tags.join(" and "),")");return t=e.operator?" ".concat(e.operator," ").concat(t):t})).join(" ")},a.onRuleAdd=function(){var e=a.state.rules.length;a.setState({rules:[].concat(Object(T.a)(a.state.rules),[{id:e,rule:{operator:void 0,tags:[]}}])})},a.onRuleDelete=function(e){if(0!==e){var t=a.state.rules.filter((function(t){return parseInt(t.id)!==parseInt(e)}));a.setState({rules:t})}else re.warning("".concat(e," is not expected to delete."))},a.onPieGroupSave=function(e){e.preventDefault();var t=a.state.rules,n=a.getRuleStr(),r=new Set;a.state.rules.forEach((function(e){e.rule.tags.forEach((function(e){r.add(e)}))}));var o=[],i=!0,s=!1,c=void 0;try{for(var l,u=r.values()[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var p=l.value;o.push(p)}}catch(d){s=!0,c=d}finally{try{i||null==u.return||u.return()}finally{if(s)throw c}}a.props.onPieGroupSave(a.state.name,n,t,o)},a.onCancel=function(e){e.preventDefault(),a.props.onCancelPieGroupDetail()},a.canSave=function(){var e=a.state,t=e.name,n=e.rules;return""!==t&&" "!==t&&n[0].rule.tags.length>0},a.onRulesOk=function(){alert("ok")},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.onRuleAdd()}},{key:"renderRules",value:function(){var e=this;return this.state.rules.map((function(t){var a=t.id,n=0===a;return r.a.createElement(he,{key:a,id:a,firstRule:n,onRuleAdd:e.onRuleAdd,onRuleDelete:e.onRuleDelete,onRuleChanged:e.onRuleChanged})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"pie-group-detail"},r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"title"},"Name"),r.a.createElement("input",{id:"title",type:"text",name:"pie group name ",value:this.state.name,onChange:this.onNameChange,autoFocus:!0,placeholder:"name of pie group - ONLY alpha numeric"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"title"},"Selection Rules"),this.renderRules()),r.a.createElement("div",{id:"rule"},this.getRuleStr()),r.a.createElement("div",{className:"pie-group-detail__controls"},r.a.createElement("button",{onClick:this.onPieGroupSave,disabled:!this.canSave()},"Save Pie Group Details"),r.a.createElement("button",{onClick:this.onCancel},"Cancel")))}}]),t}(n.Component),me=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={pieGroups:[],newPieGroup:!1,editPieGroup:void 0,uniqueTags:[]},a.onPiegroupAdd=function(){""!==a.props.reportTitle&&" "!==a.props.reportTitle?a.setState({newPieGroup:!0}):alert("Enter valid report title to proceed")},a.onEditPieGroup=function(e){a.setState({editPieGroup:e})},a.onDeletePieGroup=function(e){var t=a.state.pieGroups.filter((function(t){return t.name!==e.name}));a.setState({pieGroups:t})},a.onPieGroupSave=function(e,t,n,r){a.setState({pieGroups:[].concat(Object(T.a)(a.state.pieGroups),[{name:e,spec:t}]),uniqueTags:Object(T.a)(new Set([].concat(Object(T.a)(a.state.uniqueTags),Object(T.a)(r)))),newPieGroup:!1,editPieGroup:void 0},(function(){var e={tags:a.state.uniqueTags,groups:a.state.pieGroups};a.props.onSpecUpdate(e)}))},a.onCancelPieGroupDetail=function(){a.setState({newPieGroup:!1,editPieGroup:void 0})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderPieGroups",value:function(){var e=this;return 0!==this.state.pieGroups.length||this.state.newPieGroup?this.state.pieGroups.map((function(t){return function(t){return r.a.createElement("div",null,r.a.createElement(M.a,null),r.a.createElement("div",{key:t.name,"data-tip":t.spec,className:"pie-chart-details__group"},r.a.createElement("span",null,t.name),r.a.createElement("span",{className:"pie-chart-details__group__controls","data-tip":"delete this pie group"},r.a.createElement(U.e,{style:{color:"blue",cursor:"pointer"},onClick:function(){return e.onDeletePieGroup(t)}}))))}(t)})):r.a.createElement("span",null,"(Add filter criteria to select data for a Pie)")}},{key:"renderNewPiegroup",value:function(){return this.state.newPieGroup?r.a.createElement(fe,{onPieGroupSave:this.onPieGroupSave,onCancelPieGroupDetail:this.onCancelPieGroupDetail}):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"pie-chart-details"},r.a.createElement("label",{htmlFor:"piegroups"},"Pie Chart Groups"),r.a.createElement("div",{className:"pie-chart-details__body"},r.a.createElement("div",{className:"pie-chart-details__groups"},this.renderPieGroups(),this.renderNewPiegroup()),r.a.createElement("span",{"data-tip":"Add filter criteria to select data for a Pie",className:"pie-chart-details__controls"},r.a.createElement(M.a,null),r.a.createElement(U.a,{size:20,style:{cursor:"pointer"},onClick:this.onPiegroupAdd}))))}}]),t}(n.Component),ve=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"linechart"},"Line Chart not yet implemented!"))}}]),t}(n.Component),ge=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",chartTypes:[{value:"pie",display:"Pie Chart"},{value:"line",display:"Line Chart"}],selectedChartType:"pie",spec:{}},a.onTitleChange=function(e){a.setState({title:e.target.value})},a.onSaveReport=function(e){e.preventDefault();var t={title:a.state.title,type:a.state.selectedChartType,spec:a.state.spec};a.props.onSaveReport(t)},a.onSpecUpdate=function(e){a.state.spec=e},a.onCancelEditReport=function(e){e.preventDefault(),a.props.onCancelEditReport()},a.canSave=function(){var e=a.state,t=e.title,n=e.selectedChartType;return""!==t&&" "!==t&&"pie"===n},a.onChartTypeChange=function(e){var t=e.target.value;a.setState({selectedChartType:t})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderChartTypes",value:function(){return this.state.chartTypes.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.display)}))}},{key:"renderChartCreateView",value:function(){var e=this.state.selectedChartType;return"pie"===e?r.a.createElement(me,{reportTitle:this.state.title,onSpecUpdate:this.onSpecUpdate}):"line"===e?r.a.createElement(ve,null):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"report-create-view"},r.a.createElement("h3",{className:"report-create-view__heading"},"Create Report"),r.a.createElement("form",{className:"report-create-view__form"},r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{id:"title",type:"text",name:"Title of the Report",value:this.state.title,onChange:this.onTitleChange,autoFocus:!0,placeholder:"title of the report"})),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"charttype"},"Chart Type"),r.a.createElement("select",{onChange:this.onChartTypeChange},this.renderChartTypes())),this.renderChartCreateView(),r.a.createElement("div",{className:"report-create-view__form__controls"},r.a.createElement("button",{onClick:this.onSaveReport,disabled:!this.canSave()},"Save"),r.a.createElement("button",{onClick:this.onCancelEditReport},"Cancel"))))}}]),t}(n.Component),ke={hAxis:{title:"time spent",textPosition:"none"},vAxis:{slantedText:!0,slantedTextAngle:90},titleTextStyle:{fontFamily:"Raleway",fontSize:"12",bold:!1,italic:!1},width:"100%",chartArea:{top:10,left:40,width:"100%",height:"80%"}},ye=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={chartData:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;ie.get("/api/chartdata/".concat(this.props.report.id)).then((function(t){var a=[["Type","Effort"]];for(var n in t.data){var r=[n,t.data[n]];a.push(r)}console.log(a),e.setState({chartData:a})})).catch((function(e){oe.showError(e.message)}))}},{key:"renderGraph",value:function(){var e=this.state.chartData;return r.a.createElement(Z.a,{width:"400px",height:"200px",chartType:"PieChart",loader:r.a.createElement("div",null,"Loading Chart"),data:e,options:ke})}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderGraph())}}]),t}(r.a.Component),be=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).onDeleteReport=function(e){a.props.onDeleteReport(e.id)},a.showReportSpec=function(e){ie.get("/api/chartdata/".concat(e.id)).then((function(e){var t={};"pie"===e.type&&(t=e.spec.groups.map((function(e){return{name:e.name,spec:e.spec}}))),alert(JSON.stringify(t))})).catch((function(e){oe.showError(e.message)}))},a.closeModal=function(){a.setState({openSpecInfo:!1})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.report;return r.a.createElement("div",{className:"report-view__toolbar"},r.a.createElement(M.a,null),r.a.createElement("span",{className:"report-view__toolbar__title"},t.title),r.a.createElement("span",{className:"report-view_toolbar__controls"},r.a.createElement(U.c,{"data-tip":"click to retrieve the report specification",style:{color:"black",cursor:"pointer",marginRight:"5px"},onClick:function(){return e.showReportSpec(t)}}),r.a.createElement(U.e,{"data-tip":"delete this report",style:{color:"black",cursor:"pointer"},onClick:function(){return e.onDeleteReport(t)}})))}}]),t}(n.Component),Ee=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderByReportType",value:function(){return"pie"===this.props.report.type?r.a.createElement(ye,{report:this.props.report}):r.a.createElement("span",{style:{color:"red",fontStyle:"bold",padding:"1em",margin:"1em"}},"Unsupported repot type ",this.props.report.type," ")}},{key:"render",value:function(){return r.a.createElement("div",{className:"report-view"},r.a.createElement(be,{report:this.props.report,onDeleteReport:this.props.onDeleteReport}),r.a.createElement("div",{className:"report-view__chart"},this.renderByReportType()))}}]),t}(n.Component),Oe=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderReports",value:function(){var e=this;return this.props.reports.map((function(t){return r.a.createElement(Ee,{key:t.id,report:t,onDeleteReport:e.props.onDeleteReport})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"reports-view"},this.renderReports())}}]),t}(n.Component),we=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={showReportCreate:!1,loading:!1,reports:[]},a.loadReports=Object(D.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({loading:!0}),ie.getWithErrorHandled("/api/reports").then((function(e){a.setState({reports:e.data,loading:!1})}));case 2:case"end":return e.stop()}}),e)}))),a.onAddReport=function(){a.setState({showReportCreate:!0})},a.onReload=function(){return a.loadReports()},a.onSaveReport=function(){var e=Object(D.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({showReportCreate:!1,loading:!0}),re.log("Craeting report "+JSON.stringify(t)),e.next=5,ie.post("/api/reports",t);case 5:e.sent&&oe.showError("Error in saving the report. Pleas check and create again"),a.loadReports();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onCancelEditReport=function(){return a.setState({showReportCreate:!1})},a.onDeleteReport=function(){var e=Object(D.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.delete("/api/reports/".concat(t));case 2:e.sent&&oe.showError("Error in deleting the report. Pleas try again"),a.loadReports();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.loadReports()}},{key:"render",value:function(){return r.a.createElement("div",{className:"column-main tile"},r.a.createElement(ue,{count:this.state.reports.length,onAddReport:this.onAddReport,onReload:this.onReload,loading:this.state.loading}),this.state.showReportCreate?r.a.createElement(ge,{onSaveReport:this.onSaveReport,onCancelEditReport:this.onCancelEditReport}):null,this.state.loading?null:r.a.createElement(Oe,{reports:this.state.reports,onDeleteReport:this.onDeleteReport}))}}]),t}(n.Component),je=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).auth=new C,ie.init(a.auth),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;-1!==window.location.hash.indexOf("access_token")&&this.auth.handleAuthentication((function(t){if(t)return e.history.push("/"),alert("Error: ".concat(t.error,". Check the console for further details.")),void console.error(t);e.props.history.push("/tasks")}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(m.ToastContainer,null),r.a.createElement(y,{auth:this.auth}),r.a.createElement("div",{className:"body"},r.a.createElement(c.a,{path:"/",exact:!0,render:function(t){return r.a.createElement(v,Object.assign({auth:e.auth},t))}}),r.a.createElement(c.a,{path:"/tasks",render:function(t){return e.auth.isAuthenticated()?r.a.createElement(le,Object.assign({auth:e.auth,userProfile:e.auth.userProfile},t)):r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(c.a,{path:"/reports",render:function(t){return e.auth.isAuthenticated()?r.a.createElement(we,Object.assign({auth:e.auth},t)):r.a.createElement(f.a,{to:"/"})}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(s.a,null,r.a.createElement(c.a,{component:je})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[147,1,2]]]);
//# sourceMappingURL=main.cd96217b.chunk.js.map